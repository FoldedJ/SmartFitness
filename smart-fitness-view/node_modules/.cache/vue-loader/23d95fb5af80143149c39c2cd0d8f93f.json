{"remainingRequest":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\SmartFitness\\smart-fitness-view\\src\\views\\admin\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\SmartFitness\\smart-fitness-view\\src\\views\\admin\\Home.vue","mtime":1748184373023},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749639512193},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1749639511518},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749639512193},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1749639525774}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgcmVxdWVzdCBmcm9tICJAL3V0aWxzL3JlcXVlc3QuanMiOw0KaW1wb3J0IHJvdXRlciBmcm9tICJAL3JvdXRlci9pbmRleCI7DQppbXBvcnQgeyBjbGVhclRva2VuIH0gZnJvbSAiQC91dGlscy9zdG9yYWdlIg0KaW1wb3J0IEFkbWluTWVudSBmcm9tICdAL2NvbXBvbmVudHMvVmVydGljYWxNZW51LnZ1ZSc7DQppbXBvcnQgTG9nbyBmcm9tICdAL2NvbXBvbmVudHMvTG9nby52dWUnOw0KaW1wb3J0IExldmVsSGVhZGVyIGZyb20gJ0AvY29tcG9uZW50cy9MZXZlbEhlYWRlci52dWUnOw0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICJBZG1pbiIsDQogICAgY29tcG9uZW50czogew0KICAgICAgICBMb2dvLA0KICAgICAgICBMZXZlbEhlYWRlciwNCiAgICAgICAgQWRtaW5NZW51DQogICAgfSwNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgYWRtaW5Sb3V0ZXM6IFtdLA0KICAgICAgICAgICAgYWN0aXZlSW5kZXg6ICcnLA0KICAgICAgICAgICAgdXNlckluZm86IHsNCiAgICAgICAgICAgICAgICBpZDogbnVsbCwNCiAgICAgICAgICAgICAgICB1cmw6ICcnLA0KICAgICAgICAgICAgICAgIG5hbWU6ICcnLA0KICAgICAgICAgICAgICAgIHJvbGU6IG51bGwsDQogICAgICAgICAgICAgICAgZW1haWw6ICcnDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgZmxhZzogZmFsc2UsDQogICAgICAgICAgICB0YWc6ICflj6/op4bljJYnLA0KICAgICAgICAgICAgYmFnOiAncmdiKDI0NiwyNDYsMjQ2KScsDQogICAgICAgICAgICBjb2xvckxvZ286ICdyZ2IoNTEsNTEsNTEpJywNCiAgICAgICAgICAgIGJhZ01lbnU6ICdyZ2IoMjQ4LDI0OCwyNDgpJywNCiAgICAgICAgICAgIGRpYWxvZ09wZXJhaW9uOiBmYWxzZQ0KICAgICAgICB9Ow0KICAgIH0sDQogICAgY3JlYXRlZCgpIHsNCiAgICAgICAgbGV0IG1lbnVzID0gcm91dGVyLm9wdGlvbnMucm91dGVzLmZpbHRlcihyb3V0ZSA9PiByb3V0ZS5wYXRoID09ICcvYWRtaW4nKVswXTsNCiAgICAgICAgdGhpcy5hZG1pblJvdXRlcyA9IG1lbnVzLmNoaWxkcmVuOw0KICAgICAgICB0aGlzLnRva2VuQ2hlY2tMb2FkKCk7DQogICAgICAgIHRoaXMubWVudU9wZXJhdGlvbkhpc3RvcnkoKTsNCiAgICB9LA0KDQogICAgbWV0aG9kczogew0KICAgICAgICBhc3luYyB1cGRhdGVVc2VySW5mbygpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgdXNlclVwZGF0ZURUTyA9IHsNCiAgICAgICAgICAgICAgICAgICAgdXNlckF2YXRhcjogdGhpcy51c2VySW5mby51cmwsDQogICAgICAgICAgICAgICAgICAgIHVzZXJOYW1lOiB0aGlzLnVzZXJJbmZvLm5hbWUsDQogICAgICAgICAgICAgICAgICAgIHVzZXJFbWFpbDogdGhpcy51c2VySW5mby5lbWFpbA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb3NuZSA9IGF3YWl0IHRoaXMuJGF4aW9zLnB1dChgL3VzZXIvdXBkYXRlYCwgdXNlclVwZGF0ZURUTyk7DQogICAgICAgICAgICAgICAgY29uc3QgeyBkYXRhIH0gPSByZXNwb3NuZTsNCiAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dPcGVyYWlvbiA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnRva2VuQ2hlY2tMb2FkKCk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN3YWwuZmlyZSh7DQogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+S/ruaUueS4quS6uuS/oeaBrycsDQogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBkYXRhLm1zZywNCiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdzdWNjZXNzJywNCiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVyOiAxMDAwLA0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dPcGVyYWlvbiA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIHRoaXMuJHN3YWwuZmlyZSh7DQogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5L+u5pS55Liq5Lq65L+h5oGv5byC5bi4JywNCiAgICAgICAgICAgICAgICAgICAgdGV4dDogZSwNCiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2Vycm9yJywNCiAgICAgICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICB0aW1lcjogMjAwMCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGDkv67mlLnkuKrkurrkv6Hmga/lvILluLg6JHtlfWApOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBoYW5kbGVBdmF0YXJTdWNjZXNzKHJlcywgZmlsZSkgew0KICAgICAgICAgICAgaWYgKHJlcy5jb2RlICE9PSAyMDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGDlpLTlg4/kuIrkvKDlvILluLhgKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoYOWktOWDj+S4iuS8oOaIkOWKn2ApOw0KICAgICAgICAgICAgdGhpcy51c2VySW5mby51cmwgPSByZXMuZGF0YTsNCiAgICAgICAgfSwNCiAgICAgICAgZXZlbnRMaXN0ZW5lcihldmVudCkgew0KICAgICAgICAgICAgLy8g5Liq5Lq65Lit5b+DDQogICAgICAgICAgICBpZiAoZXZlbnQgPT09ICdjZW50ZXInKSB7DQogICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dPcGVyYWlvbiA9IHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyDpgIDlh7rnmbvlvZUNCiAgICAgICAgICAgIGlmIChldmVudCA9PT0gJ2xvZ2luT3V0Jykgew0KICAgICAgICAgICAgICAgIHRoaXMubG9naW5PdXQoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgbG9naW5PdXQoKSB7DQogICAgICAgICAgICBjb25zdCBjb25maXJtZWQgPSBhd2FpdCB0aGlzLiRzd2FsQ29uZmlybSh7DQogICAgICAgICAgICAgICAgdGl0bGU6ICfpgIDlh7rnmbvlvZXvvJ8nLA0KICAgICAgICAgICAgICAgIHRleHQ6IGDmjqjlh7rlkI7pnIDph43mlrDnmbvlvZXvvJ9gLA0KICAgICAgICAgICAgICAgIGljb246ICd3YXJuaW5nJywNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCkgew0KICAgICAgICAgICAgICAgIHRoaXMuJHN3YWwuZmlyZSh7DQogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn6YCA5Ye655m75b2V5oiQ5YqfJywNCiAgICAgICAgICAgICAgICAgICAgdGV4dDogJzFzIOWQjui/lOWbnueZu+W9lemhtemdoicsDQogICAgICAgICAgICAgICAgICAgIGljb246ICdzdWNjZXNzJywNCiAgICAgICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICB0aW1lcjogMTAwMCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY2xlYXJUb2tlbigpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2xvZ2luIik7DQogICAgICAgICAgICAgICAgfSwgMTAwMCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgbWVudU9wZXJhdGlvbkhpc3RvcnkoKSB7DQogICAgICAgICAgICB0aGlzLmZsYWcgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdmbGFnJykgPT09ICd0cnVlJzsNCiAgICAgICAgfSwNCiAgICAgICAgc2VsZWN0T3BlcmF0aW9uKGZsYWcpIHsNCiAgICAgICAgICAgIHRoaXMuZmxhZyA9IGZsYWc7DQogICAgICAgIH0sDQogICAgICAgIGhhbmRsZVJvdXRlU2VsZWN0KGluZGV4KSB7DQogICAgICAgICAgICBsZXQgYXJ5ID0gdGhpcy5hZG1pblJvdXRlcy5maWx0ZXIoZW50aXR5ID0+IGVudGl0eS5wYXRoID09IGluZGV4KTsNCiAgICAgICAgICAgIHRoaXMudGFnID0gYXJ5WzBdLm5hbWU7DQogICAgICAgICAgICBpZiAodGhpcy4kcm91dGVyLmN1cnJlbnRSb3V0ZS5mdWxsUGF0aCA9PSBpbmRleCkgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKGluZGV4KTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gVG9rZW7mo4DpqowNCiAgICAgICAgYXN5bmMgdG9rZW5DaGVja0xvYWQoKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QuZ2V0KCd1c2VyL2F1dGgnKTsNCiAgICAgICAgICAgICAgICAvLyDplJnor6/lpITnkIYNCiAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gNDAwKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLmRhdGEubXNnKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIOeUqOaIt+S/oeaBr+i1i+WAvA0KICAgICAgICAgICAgICAgIGNvbnN0IHsgaWQsIHVzZXJBdmF0YXI6IHVybCwgdXNlck5hbWU6IG5hbWUsIHVzZXJSb2xlOiByb2xlLCB1c2VyRW1haWw6IGVtYWlsIH0gPSByZXMuZGF0YS5kYXRhOw0KICAgICAgICAgICAgICAgIHRoaXMudXNlckluZm8gPSB7IGlkLCB1cmwsIG5hbWUsIHJvbGUsIGVtYWlsIH07DQogICAgICAgICAgICAgICAgLy8g5qC55o2u6KeS6Imy6Kej5p6Q6Lev55SxDQogICAgICAgICAgICAgICAgY29uc3Qgcm9sZVBhdGggPSByb2xlID09PSAxID8gJy9hZG1pbicgOiAnL3VzZXInOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldE1lbnUgPSByb3V0ZXIub3B0aW9ucy5yb3V0ZXMuZmluZChyb3V0ZSA9PiByb3V0ZS5wYXRoID09PSByb2xlUGF0aCk7DQogICAgICAgICAgICAgICAgaWYgKHRhcmdldE1lbnUpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3V0ZXJzID0gdGFyZ2V0TWVudS5jaGlsZHJlbjsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYOacquaJvuWIsOS4juinkuiJsuWvueW6lOeahOi3r+eUse+8miR7cm9sZVBhdGh9YCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfojrflj5bnlKjmiLforqTor4Hkv6Hmga/ml7blj5HnlJ/plJnor686JywgZXJyb3IpOw0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iupOivgeS/oeaBr+WKoOi9veWksei0pSzor7fph43or5XvvIEnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICB9DQp9Ow0K"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\r\n    <div class=\"menu-container\">\r\n        <div class=\"menu-side\" :class=\"{ 'menu-side-narrow': flag }\">\r\n            <div style=\"display: flex;align-items: center;\">\r\n                <Logo style=\"padding: 0 40px;margin: 10px 0;\" sysName=\"小绿书\" :flag=\"flag\" :bag=\"colorLogo\" />\r\n            </div>\r\n            <div style=\"margin-top: 12px;\">\r\n                <AdminMenu :flag=\"flag\" :routes=\"adminRoutes\" :bag=\"bagMenu\" @select=\"handleRouteSelect\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"main\">\r\n            <div class=\"header-section\">\r\n                <LevelHeader @eventListener=\"eventListener\" @selectOperation=\"selectOperation\" :tag=\"tag\"\r\n                    :userInfo=\"userInfo\" />\r\n            </div>\r\n            <div class=\"content-section\">\r\n                <router-view></router-view>\r\n            </div>\r\n        </div>\r\n        <!-- 个人中心 -->\r\n        <el-dialog :show-close=\"false\" :visible.sync=\"dialogOperaion\" width=\"26%\">\r\n            <div slot=\"title\" style=\"padding: 25px 0 0 20px;\">\r\n                <span style=\"font-size: 18px;font-weight: 800;\">个人中心</span>\r\n            </div>\r\n            <el-row style=\"padding: 10px 20px 20px 20px;\">\r\n                <el-row>\r\n                    <p style=\"font-size: 12px;padding: 3px 0;margin-bottom: 10px;\">\r\n                        <span class=\"modelName\">*头像</span>\r\n                    </p>\r\n                    <el-upload class=\"avatar-uploader\" action=\"http://localhost:21090/api/smart-fitness/v1.0/file/upload\"\r\n                        :show-file-list=\"false\" :on-success=\"handleAvatarSuccess\">\r\n                        <img v-if=\"userInfo.url\" :src=\"userInfo.url\" style=\"width: 80px;height: 80px;\">\r\n                        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n                    </el-upload>\r\n                </el-row>\r\n                <el-row>\r\n                    <p style=\"font-size: 12px;padding: 3px 0;\">\r\n                        <span class=\"modelName\">*用户名</span>\r\n                    </p>\r\n                    <input class=\"input-title\" v-model=\"userInfo.name\" placeholder=\"用户名\">\r\n                </el-row>\r\n                <el-row>\r\n                    <p style=\"font-size: 12px;padding: 3px 0;\">\r\n                        <span class=\"modelName\">*用户邮箱</span>\r\n                    </p>\r\n                    <input class=\"input-title\" v-model=\"userInfo.email\" placeholder=\"用户邮箱\">\r\n                </el-row>\r\n            </el-row>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button class=\"customer\" size=\"small\" style=\"background-color: rgb(241, 241, 241);border: none;\"\r\n                    @click=\"dialogOperaion = false\">取 消</el-button>\r\n                <el-button size=\"small\" style=\"background-color: #15559a;border: none;\" class=\"customer\" type=\"info\"\r\n                    @click=\"updateUserInfo\">修改</el-button>\r\n            </span>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n<script>\r\nimport request from \"@/utils/request.js\";\r\nimport router from \"@/router/index\";\r\nimport { clearToken } from \"@/utils/storage\"\r\nimport AdminMenu from '@/components/VerticalMenu.vue';\r\nimport Logo from '@/components/Logo.vue';\r\nimport LevelHeader from '@/components/LevelHeader.vue';\r\nexport default {\r\n    name: \"Admin\",\r\n    components: {\r\n        Logo,\r\n        LevelHeader,\r\n        AdminMenu\r\n    },\r\n    data() {\r\n        return {\r\n            adminRoutes: [],\r\n            activeIndex: '',\r\n            userInfo: {\r\n                id: null,\r\n                url: '',\r\n                name: '',\r\n                role: null,\r\n                email: ''\r\n            },\r\n            flag: false,\r\n            tag: '可视化',\r\n            bag: 'rgb(246,246,246)',\r\n            colorLogo: 'rgb(51,51,51)',\r\n            bagMenu: 'rgb(248,248,248)',\r\n            dialogOperaion: false\r\n        };\r\n    },\r\n    created() {\r\n        let menus = router.options.routes.filter(route => route.path == '/admin')[0];\r\n        this.adminRoutes = menus.children;\r\n        this.tokenCheckLoad();\r\n        this.menuOperationHistory();\r\n    },\r\n\r\n    methods: {\r\n        async updateUserInfo() {\r\n            try {\r\n                const userUpdateDTO = {\r\n                    userAvatar: this.userInfo.url,\r\n                    userName: this.userInfo.name,\r\n                    userEmail: this.userInfo.email\r\n                }\r\n                const resposne = await this.$axios.put(`/user/update`, userUpdateDTO);\r\n                const { data } = resposne;\r\n                if (data.code === 200) {\r\n                    this.dialogOperaion = false;\r\n                    this.tokenCheckLoad();\r\n                    this.$swal.fire({\r\n                        title: '修改个人信息',\r\n                        text: data.msg,\r\n                        icon: 'success',\r\n                        showConfirmButton: false,\r\n                        timer: 1000,\r\n                    });\r\n                }\r\n            } catch (e) {\r\n                this.dialogOperaion = false;\r\n                this.$swal.fire({\r\n                    title: '修改个人信息异常',\r\n                    text: e,\r\n                    icon: 'error',\r\n                    showConfirmButton: false,\r\n                    timer: 2000,\r\n                });\r\n                console.error(`修改个人信息异常:${e}`);\r\n            }\r\n        },\r\n        handleAvatarSuccess(res, file) {\r\n            if (res.code !== 200) {\r\n                this.$message.error(`头像上传异常`);\r\n                return;\r\n            }\r\n            this.$message.success(`头像上传成功`);\r\n            this.userInfo.url = res.data;\r\n        },\r\n        eventListener(event) {\r\n            // 个人中心\r\n            if (event === 'center') {\r\n                this.dialogOperaion = true;\r\n            }\r\n            // 退出登录\r\n            if (event === 'loginOut') {\r\n                this.loginOut();\r\n            }\r\n        },\r\n        async loginOut() {\r\n            const confirmed = await this.$swalConfirm({\r\n                title: '退出登录？',\r\n                text: `推出后需重新登录？`,\r\n                icon: 'warning',\r\n            });\r\n            if (confirmed) {\r\n                this.$swal.fire({\r\n                    title: '退出登录成功',\r\n                    text: '1s 后返回登录页面',\r\n                    icon: 'success',\r\n                    showConfirmButton: false,\r\n                    timer: 1000,\r\n                });\r\n                setTimeout(() => {\r\n                    clearToken();\r\n                    this.$router.push(\"/login\");\r\n                }, 1000)\r\n            }\r\n        },\r\n        menuOperationHistory() {\r\n            this.flag = sessionStorage.getItem('flag') === 'true';\r\n        },\r\n        selectOperation(flag) {\r\n            this.flag = flag;\r\n        },\r\n        handleRouteSelect(index) {\r\n            let ary = this.adminRoutes.filter(entity => entity.path == index);\r\n            this.tag = ary[0].name;\r\n            if (this.$router.currentRoute.fullPath == index) {\r\n                return;\r\n            }\r\n            this.$router.push(index);\r\n        },\r\n        // Token检验\r\n        async tokenCheckLoad() {\r\n            try {\r\n                const res = await request.get('user/auth');\r\n                // 错误处理\r\n                if (res.data.code === 400) {\r\n                    this.$message.error(res.data.msg);\r\n                    this.$router.push('/login');\r\n                    return;\r\n                }\r\n                // 用户信息赋值\r\n                const { id, userAvatar: url, userName: name, userRole: role, userEmail: email } = res.data.data;\r\n                this.userInfo = { id, url, name, role, email };\r\n                // 根据角色解析路由\r\n                const rolePath = role === 1 ? '/admin' : '/user';\r\n                const targetMenu = router.options.routes.find(route => route.path === rolePath);\r\n                if (targetMenu) {\r\n                    this.routers = targetMenu.children;\r\n                } else {\r\n                    console.warn(`未找到与角色对应的路由：${rolePath}`);\r\n                }\r\n            } catch (error) {\r\n                console.error('获取用户认证信息时发生错误:', error);\r\n                this.$message.error('认证信息加载失败,请重试！');\r\n            }\r\n        },\r\n    }\r\n};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.menu-container {\r\n    display: flex;\r\n    height: 100vh;\r\n    width: 100%;\r\n\r\n\r\n    .menu-side {\r\n        width: 253px;\r\n        min-width: 115px;\r\n        height: 100vh;\r\n        padding-top: 10px;\r\n        box-sizing: border-box;\r\n        transition: width 0.3s ease;\r\n        background-color: rgb(248,248,248);\r\n        border-right: 1px solid rgb(240, 240, 240);\r\n    }\r\n\r\n    .menu-side-narrow {\r\n        width: 115px;\r\n    }\r\n\r\n    .main {\r\n        flex-grow: 1;\r\n        overflow-x: hidden;\r\n\r\n        .header-section {\r\n            max-width: 100%;\r\n            padding: 0 15px;\r\n        }\r\n\r\n        .content-section {\r\n            flex-grow: 1;\r\n            padding: 5px;\r\n            overflow-y: auto;\r\n        }\r\n    }\r\n\r\n\r\n\r\n}\r\n</style>"]}]}