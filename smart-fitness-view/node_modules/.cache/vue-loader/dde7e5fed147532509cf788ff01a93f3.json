{"remainingRequest":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\SmartFitness\\smart-fitness-view\\src\\components\\ChatBot.vue?vue&type=style&index=0&id=0f6a85cf&scoped=true&lang=css&","dependencies":[{"path":"E:\\SmartFitness\\smart-fitness-view\\src\\components\\ChatBot.vue","mtime":1749640167938},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\css-loader\\dist\\cjs.js","mtime":1749639516075},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1749639525775},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\postcss-loader\\src\\index.js","mtime":1749639521038},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749639512193},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1749639525774}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQouY2hhdC1ib3QtY29udGFpbmVyIHsNCiAgcG9zaXRpb246IGZpeGVkOw0KICBib3R0b206IDIwcHg7DQogIHJpZ2h0OiAyMHB4Ow0KICB3aWR0aDogMzUwcHg7DQogIGJhY2tncm91bmQ6IHdoaXRlOw0KICBib3JkZXItcmFkaXVzOiA4cHg7DQogIGJveC1zaGFkb3c6IDAgMnB4IDEycHggMCByZ2JhKDAsIDAsIDAsIDAuMSk7DQogIHotaW5kZXg6IDEwMDA7DQogIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2U7DQp9DQoNCi5jaGF0LWJvdC1taW5pbWl6ZWQgew0KICB3aWR0aDogMjAwcHg7DQp9DQoNCi5jaGF0LWJvdC1oZWFkZXIgew0KICBwYWRkaW5nOiAxMnB4IDE2cHg7DQogIGJhY2tncm91bmQ6ICM0MDlFRkY7DQogIGNvbG9yOiB3aGl0ZTsNCiAgYm9yZGVyLXJhZGl1czogOHB4IDhweCAwIDA7DQogIGN1cnNvcjogcG9pbnRlcjsNCiAgZGlzcGxheTogZmxleDsNCiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOw0KICBhbGlnbi1pdGVtczogY2VudGVyOw0KfQ0KDQouY2hhdC1ib3QtdGl0bGUgew0KICBmb250LXNpemU6IDE2cHg7DQogIGZvbnQtd2VpZ2h0OiA1MDA7DQp9DQoNCi5jb250cm9sLWljb24gew0KICBmb250LXNpemU6IDE4cHg7DQp9DQoNCi5jaGF0LWJvdC1jb250ZW50IHsNCiAgaGVpZ2h0OiA0MDBweDsNCiAgZGlzcGxheTogZmxleDsNCiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCn0NCg0KLmNoYXQtbWVzc2FnZXMgew0KICBmbGV4OiAxOw0KICBvdmVyZmxvdy15OiBhdXRvOw0KICBwYWRkaW5nOiAxNnB4Ow0KfQ0KDQoubWVzc2FnZSB7DQogIG1hcmdpbi1ib3R0b206IDEycHg7DQogIG1heC13aWR0aDogODAlOw0KfQ0KDQoudXNlci1tZXNzYWdlIHsNCiAgbWFyZ2luLWxlZnQ6IGF1dG87DQp9DQoNCi5ib3QtbWVzc2FnZSB7DQogIG1hcmdpbi1yaWdodDogYXV0bzsNCn0NCg0KLm1lc3NhZ2UtY29udGVudCB7DQogIHBhZGRpbmc6IDhweCAxMnB4Ow0KICBib3JkZXItcmFkaXVzOiA4cHg7DQogIGJhY2tncm91bmQ6ICNmNGY0ZjU7DQogIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7DQp9DQoNCi51c2VyLW1lc3NhZ2UgLm1lc3NhZ2UtY29udGVudCB7DQogIGJhY2tncm91bmQ6ICM0MDlFRkY7DQogIGNvbG9yOiB3aGl0ZTsNCn0NCg0KLmNoYXQtaW5wdXQtYXJlYSB7DQogIHBhZGRpbmc6IDEycHg7DQogIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWJlZWY1Ow0KICBkaXNwbGF5OiBmbGV4Ow0KICBnYXA6IDhweDsNCn0NCg0KLmNoYXQtaW5wdXQtYXJlYSAuZWwtYnV0dG9uIHsNCiAgYWxpZ24tc2VsZjogZmxleC1lbmQ7DQp9DQo="},{"version":3,"sources":["ChatBot.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"ChatBot.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"chat-bot-container\" :class=\"{ 'chat-bot-minimized': isMinimized }\">\r\n    <!-- 悬浮窗头部 -->\r\n    <div class=\"chat-bot-header\" @click=\"toggleMinimize\">\r\n      <span class=\"chat-bot-title\">智能助手</span>\r\n      <div class=\"chat-bot-controls\">\r\n        <i :class=\"isMinimized ? 'el-icon-plus' : 'el-icon-minus'\" class=\"control-icon\"></i>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 聊天内容区域 -->\r\n    <div class=\"chat-bot-content\" v-show=\"!isMinimized\">\r\n      <div class=\"chat-messages\" ref=\"messageContainer\">\r\n        <div v-for=\"(message, index) in messages\" :key=\"index\" \r\n             :class=\"['message', message.type === 'user' ? 'user-message' : 'bot-message']\">\r\n          <div class=\"message-content\">{{ message.content }}</div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 输入区域 -->\r\n      <div class=\"chat-input-area\">\r\n        <el-input\r\n          v-model=\"userInput\"\r\n          type=\"textarea\"\r\n          :rows=\"2\"\r\n          placeholder=\"请输入您的问题...\"\r\n          @keyup.enter.native=\"sendMessage\"\r\n        ></el-input>\r\n        <el-button type=\"primary\" @click=\"sendMessage\" :disabled=\"!userInput.trim() || isLoading\">\r\n          {{ isLoading ? '发送中...' : '发送' }}\r\n        </el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'ChatBot',\r\n  data() {\r\n    return {\r\n      isMinimized: false,\r\n      userInput: '',\r\n      messages: [],\r\n      isLoading: false,\r\n      apiConfig: {\r\n        token: 'pat_ZR3dhICDUSMapWasnt1NKW29LcoyvZlRVdKZetwZ5moYxCdzZq8Ju8MUGZmQoF2A',\r\n        baseURL: 'https://api.coze.cn'\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    // 添加欢迎消息\r\n    this.messages.push({\r\n      type: 'bot',\r\n      content: '您好！我是您的智能健身助手，请问有什么可以帮您？'\r\n    });\r\n  },\r\n  methods: {\r\n    toggleMinimize() {\r\n      this.isMinimized = !this.isMinimized;\r\n    },\r\n    async sendMessage() {\r\n      if (!this.userInput.trim() || this.isLoading) return;\r\n\r\n      // 添加用户消息\r\n      this.messages.push({\r\n        type: 'user',\r\n        content: this.userInput\r\n      });\r\n\r\n      const userMessage = this.userInput;\r\n      this.userInput = '';\r\n      this.isLoading = true;\r\n\r\n      try {\r\n        // 调用Coze API\r\n        const response = await axios.post(\r\n          `${this.apiConfig.baseURL}/v1/chat/completions`,\r\n          {\r\n            messages: [{\r\n              role: 'user',\r\n              content: userMessage\r\n            }]\r\n          },\r\n          {\r\n            headers: {\r\n              'Authorization': `Bearer ${this.apiConfig.token}`,\r\n              'Content-Type': 'application/json'\r\n            }\r\n          }\r\n        );\r\n\r\n        // 添加机器人回复\r\n        this.messages.push({\r\n          type: 'bot',\r\n          content: response.data.choices[0].message.content\r\n        });\r\n\r\n        // 滚动到底部\r\n        this.$nextTick(() => {\r\n          const container = this.$refs.messageContainer;\r\n          container.scrollTop = container.scrollHeight;\r\n        });\r\n      } catch (error) {\r\n        console.error('Chat API error:', error);\r\n        this.messages.push({\r\n          type: 'bot',\r\n          content: '抱歉，我遇到了一些问题，请稍后再试。'\r\n        });\r\n      } finally {\r\n        this.isLoading = false;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.chat-bot-container {\r\n  position: fixed;\r\n  bottom: 20px;\r\n  right: 20px;\r\n  width: 350px;\r\n  background: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n  z-index: 1000;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.chat-bot-minimized {\r\n  width: 200px;\r\n}\r\n\r\n.chat-bot-header {\r\n  padding: 12px 16px;\r\n  background: #409EFF;\r\n  color: white;\r\n  border-radius: 8px 8px 0 0;\r\n  cursor: pointer;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.chat-bot-title {\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n}\r\n\r\n.control-icon {\r\n  font-size: 18px;\r\n}\r\n\r\n.chat-bot-content {\r\n  height: 400px;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.chat-messages {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 16px;\r\n}\r\n\r\n.message {\r\n  margin-bottom: 12px;\r\n  max-width: 80%;\r\n}\r\n\r\n.user-message {\r\n  margin-left: auto;\r\n}\r\n\r\n.bot-message {\r\n  margin-right: auto;\r\n}\r\n\r\n.message-content {\r\n  padding: 8px 12px;\r\n  border-radius: 8px;\r\n  background: #f4f4f5;\r\n  word-break: break-word;\r\n}\r\n\r\n.user-message .message-content {\r\n  background: #409EFF;\r\n  color: white;\r\n}\r\n\r\n.chat-input-area {\r\n  padding: 12px;\r\n  border-top: 1px solid #ebeef5;\r\n  display: flex;\r\n  gap: 8px;\r\n}\r\n\r\n.chat-input-area .el-button {\r\n  align-self: flex-end;\r\n}\r\n</style> "]}]}