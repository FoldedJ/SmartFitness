{"remainingRequest":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\SmartFitness\\smart-fitness-view\\src\\components\\ChatBot.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\SmartFitness\\smart-fitness-view\\src\\components\\ChatBot.vue","mtime":1749639942885},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749639512193},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1749639511518},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749639512193},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1749639525774}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBDb3plQVBJIH0gZnJvbSAnQGNvemUvYXBpJzsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnQ2hhdEJvdCcsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGlzTWluaW1pemVkOiBmYWxzZSwNCiAgICAgIHVzZXJJbnB1dDogJycsDQogICAgICBtZXNzYWdlczogW10sDQogICAgICBhcGlDbGllbnQ6IG5ldyBDb3plQVBJKHsNCiAgICAgICAgdG9rZW46ICdwYXRfWlIzZGhJQ0RVU01hcFdhc250MU5LVzI5TGNveXZabFJWZEtaZXR3WjVtb1l4Q2R6WnE4SnU4TVVHWm1Rb0YyQScsDQogICAgICAgIGJhc2VVUkw6ICdodHRwczovL2FwaS5jb3plLmNuJw0KICAgICAgfSkNCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgdG9nZ2xlTWluaW1pemUoKSB7DQogICAgICB0aGlzLmlzTWluaW1pemVkID0gIXRoaXMuaXNNaW5pbWl6ZWQ7DQogICAgfSwNCiAgICBhc3luYyBzZW5kTWVzc2FnZSgpIHsNCiAgICAgIGlmICghdGhpcy51c2VySW5wdXQudHJpbSgpKSByZXR1cm47DQoNCiAgICAgIC8vIOa3u+WKoOeUqOaIt+a2iOaBrw0KICAgICAgdGhpcy5tZXNzYWdlcy5wdXNoKHsNCiAgICAgICAgdHlwZTogJ3VzZXInLA0KICAgICAgICBjb250ZW50OiB0aGlzLnVzZXJJbnB1dA0KICAgICAgfSk7DQoNCiAgICAgIGNvbnN0IHVzZXJNZXNzYWdlID0gdGhpcy51c2VySW5wdXQ7DQogICAgICB0aGlzLnVzZXJJbnB1dCA9ICcnOw0KDQogICAgICB0cnkgew0KICAgICAgICAvLyDosIPnlKhDb3plIEFQSQ0KICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNoYXQoew0KICAgICAgICAgIG1lc3NhZ2VzOiBbew0KICAgICAgICAgICAgcm9sZTogJ3VzZXInLA0KICAgICAgICAgICAgY29udGVudDogdXNlck1lc3NhZ2UNCiAgICAgICAgICB9XQ0KICAgICAgICB9KTsNCg0KICAgICAgICAvLyDmt7vliqDmnLrlmajkurrlm57lpI0NCiAgICAgICAgdGhpcy5tZXNzYWdlcy5wdXNoKHsNCiAgICAgICAgICB0eXBlOiAnYm90JywNCiAgICAgICAgICBjb250ZW50OiByZXNwb25zZS5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudA0KICAgICAgICB9KTsNCg0KICAgICAgICAvLyDmu5rliqjliLDlupXpg6gNCiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuJHJlZnMubWVzc2FnZUNvbnRhaW5lcjsNCiAgICAgICAgICBjb250YWluZXIuc2Nyb2xsVG9wID0gY29udGFpbmVyLnNjcm9sbEhlaWdodDsNCiAgICAgICAgfSk7DQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICBjb25zb2xlLmVycm9yKCdDaGF0IEFQSSBlcnJvcjonLCBlcnJvcik7DQogICAgICAgIHRoaXMubWVzc2FnZXMucHVzaCh7DQogICAgICAgICAgdHlwZTogJ2JvdCcsDQogICAgICAgICAgY29udGVudDogJ+aKseatie+8jOaIkemBh+WIsOS6huS4gOS6m+mXrumimO+8jOivt+eojeWQjuWGjeivleOAgicNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["ChatBot.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ChatBot.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"chat-bot-container\" :class=\"{ 'chat-bot-minimized': isMinimized }\">\r\n    <!-- 悬浮窗头部 -->\r\n    <div class=\"chat-bot-header\" @click=\"toggleMinimize\">\r\n      <span class=\"chat-bot-title\">智能助手</span>\r\n      <div class=\"chat-bot-controls\">\r\n        <i :class=\"isMinimized ? 'el-icon-plus' : 'el-icon-minus'\" class=\"control-icon\"></i>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 聊天内容区域 -->\r\n    <div class=\"chat-bot-content\" v-show=\"!isMinimized\">\r\n      <div class=\"chat-messages\" ref=\"messageContainer\">\r\n        <div v-for=\"(message, index) in messages\" :key=\"index\" \r\n             :class=\"['message', message.type === 'user' ? 'user-message' : 'bot-message']\">\r\n          <div class=\"message-content\">{{ message.content }}</div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 输入区域 -->\r\n      <div class=\"chat-input-area\">\r\n        <el-input\r\n          v-model=\"userInput\"\r\n          type=\"textarea\"\r\n          :rows=\"2\"\r\n          placeholder=\"请输入您的问题...\"\r\n          @keyup.enter.native=\"sendMessage\"\r\n        ></el-input>\r\n        <el-button type=\"primary\" @click=\"sendMessage\" :disabled=\"!userInput.trim()\">\r\n          发送\r\n        </el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { CozeAPI } from '@coze/api';\r\n\r\nexport default {\r\n  name: 'ChatBot',\r\n  data() {\r\n    return {\r\n      isMinimized: false,\r\n      userInput: '',\r\n      messages: [],\r\n      apiClient: new CozeAPI({\r\n        token: 'pat_ZR3dhICDUSMapWasnt1NKW29LcoyvZlRVdKZetwZ5moYxCdzZq8Ju8MUGZmQoF2A',\r\n        baseURL: 'https://api.coze.cn'\r\n      })\r\n    };\r\n  },\r\n  methods: {\r\n    toggleMinimize() {\r\n      this.isMinimized = !this.isMinimized;\r\n    },\r\n    async sendMessage() {\r\n      if (!this.userInput.trim()) return;\r\n\r\n      // 添加用户消息\r\n      this.messages.push({\r\n        type: 'user',\r\n        content: this.userInput\r\n      });\r\n\r\n      const userMessage = this.userInput;\r\n      this.userInput = '';\r\n\r\n      try {\r\n        // 调用Coze API\r\n        const response = await this.apiClient.chat({\r\n          messages: [{\r\n            role: 'user',\r\n            content: userMessage\r\n          }]\r\n        });\r\n\r\n        // 添加机器人回复\r\n        this.messages.push({\r\n          type: 'bot',\r\n          content: response.choices[0].message.content\r\n        });\r\n\r\n        // 滚动到底部\r\n        this.$nextTick(() => {\r\n          const container = this.$refs.messageContainer;\r\n          container.scrollTop = container.scrollHeight;\r\n        });\r\n      } catch (error) {\r\n        console.error('Chat API error:', error);\r\n        this.messages.push({\r\n          type: 'bot',\r\n          content: '抱歉，我遇到了一些问题，请稍后再试。'\r\n        });\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.chat-bot-container {\r\n  position: fixed;\r\n  bottom: 20px;\r\n  right: 20px;\r\n  width: 350px;\r\n  background: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n  z-index: 1000;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.chat-bot-minimized {\r\n  width: 200px;\r\n}\r\n\r\n.chat-bot-header {\r\n  padding: 12px 16px;\r\n  background: #409EFF;\r\n  color: white;\r\n  border-radius: 8px 8px 0 0;\r\n  cursor: pointer;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.chat-bot-title {\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n}\r\n\r\n.control-icon {\r\n  font-size: 18px;\r\n}\r\n\r\n.chat-bot-content {\r\n  height: 400px;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.chat-messages {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 16px;\r\n}\r\n\r\n.message {\r\n  margin-bottom: 12px;\r\n  max-width: 80%;\r\n}\r\n\r\n.user-message {\r\n  margin-left: auto;\r\n}\r\n\r\n.bot-message {\r\n  margin-right: auto;\r\n}\r\n\r\n.message-content {\r\n  padding: 8px 12px;\r\n  border-radius: 8px;\r\n  background: #f4f4f5;\r\n  word-break: break-word;\r\n}\r\n\r\n.user-message .message-content {\r\n  background: #409EFF;\r\n  color: white;\r\n}\r\n\r\n.chat-input-area {\r\n  padding: 12px;\r\n  border-top: 1px solid #ebeef5;\r\n  display: flex;\r\n  gap: 8px;\r\n}\r\n\r\n.chat-input-area .el-button {\r\n  align-self: flex-end;\r\n}\r\n</style> "]}]}