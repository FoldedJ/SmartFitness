{"remainingRequest":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\SmartFitness\\smart-fitness-view\\src\\components\\ChatBot.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\SmartFitness\\smart-fitness-view\\src\\components\\ChatBot.vue","mtime":1749640230233},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749639512193},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1749639511518},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749639512193},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1749639525774}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdDaGF0Qm90JywNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaXNNaW5pbWl6ZWQ6IGZhbHNlLA0KICAgICAgdXNlcklucHV0OiAnJywNCiAgICAgIG1lc3NhZ2VzOiBbXSwNCiAgICAgIGlzTG9hZGluZzogZmFsc2UsDQogICAgICBhcGlDb25maWc6IHsNCiAgICAgICAgdG9rZW46ICdwYXRfWlIzZGhJQ0RVU01hcFdhc250MU5LVzI5TGNveXZabFJWZEtaZXR3WjVtb1l4Q2R6WnE4SnU4TVVHWm1Rb0YyQScsDQogICAgICAgIGJhc2VVUkw6ICdodHRwczovL2FwaS5jb3plLmNuJywNCiAgICAgICAgbW9kZWw6ICdncHQtMy41LXR1cmJvJw0KICAgICAgfQ0KICAgIH07DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgLy8g5re75Yqg5qyi6L+O5raI5oGvDQogICAgdGhpcy5tZXNzYWdlcy5wdXNoKHsNCiAgICAgIHR5cGU6ICdib3QnLA0KICAgICAgY29udGVudDogJ+aCqOWlve+8geaIkeaYr+aCqOeahOaZuuiDveWBpei6q+WKqeaJi++8jOivt+mXruacieS7gOS5iOWPr+S7peW4ruaCqO+8nycNCiAgICB9KTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHRvZ2dsZU1pbmltaXplKCkgew0KICAgICAgdGhpcy5pc01pbmltaXplZCA9ICF0aGlzLmlzTWluaW1pemVkOw0KICAgIH0sDQogICAgYXN5bmMgc2VuZE1lc3NhZ2UoKSB7DQogICAgICBpZiAoIXRoaXMudXNlcklucHV0LnRyaW0oKSB8fCB0aGlzLmlzTG9hZGluZykgcmV0dXJuOw0KDQogICAgICAvLyDmt7vliqDnlKjmiLfmtojmga8NCiAgICAgIHRoaXMubWVzc2FnZXMucHVzaCh7DQogICAgICAgIHR5cGU6ICd1c2VyJywNCiAgICAgICAgY29udGVudDogdGhpcy51c2VySW5wdXQNCiAgICAgIH0pOw0KDQogICAgICBjb25zdCB1c2VyTWVzc2FnZSA9IHRoaXMudXNlcklucHV0Ow0KICAgICAgdGhpcy51c2VySW5wdXQgPSAnJzsNCiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsNCg0KICAgICAgdHJ5IHsNCiAgICAgICAgLy8g6LCD55SoQ296ZSBBUEkNCiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KA0KICAgICAgICAgIGAke3RoaXMuYXBpQ29uZmlnLmJhc2VVUkx9L2FwaS9jaGF0L2NvbXBsZXRpb25zYCwNCiAgICAgICAgICB7DQogICAgICAgICAgICBtb2RlbDogdGhpcy5hcGlDb25maWcubW9kZWwsDQogICAgICAgICAgICBtZXNzYWdlczogW3sNCiAgICAgICAgICAgICAgcm9sZTogJ3VzZXInLA0KICAgICAgICAgICAgICBjb250ZW50OiB1c2VyTWVzc2FnZQ0KICAgICAgICAgICAgfV0sDQogICAgICAgICAgICB0ZW1wZXJhdHVyZTogMC43LA0KICAgICAgICAgICAgbWF4X3Rva2VuczogMTAwMA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLmFwaUNvbmZpZy50b2tlbn1gLA0KICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLA0KICAgICAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICApOw0KDQogICAgICAgIC8vIOa3u+WKoOacuuWZqOS6uuWbnuWkjQ0KICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSAmJiByZXNwb25zZS5kYXRhLmNob2ljZXMgJiYgcmVzcG9uc2UuZGF0YS5jaG9pY2VzWzBdKSB7DQogICAgICAgICAgdGhpcy5tZXNzYWdlcy5wdXNoKHsNCiAgICAgICAgICAgIHR5cGU6ICdib3QnLA0KICAgICAgICAgICAgY29udGVudDogcmVzcG9uc2UuZGF0YS5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudA0KICAgICAgICAgIH0pOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCByZXNwb25zZSBmb3JtYXQnKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIOa7muWKqOWIsOW6lemDqA0KICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy4kcmVmcy5tZXNzYWdlQ29udGFpbmVyOw0KICAgICAgICAgIGNvbnRhaW5lci5zY3JvbGxUb3AgPSBjb250YWluZXIuc2Nyb2xsSGVpZ2h0Ow0KICAgICAgICB9KTsNCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NoYXQgQVBJIGVycm9yOicsIGVycm9yKTsNCiAgICAgICAgdGhpcy5tZXNzYWdlcy5wdXNoKHsNCiAgICAgICAgICB0eXBlOiAnYm90JywNCiAgICAgICAgICBjb250ZW50OiAn5oqx5q2J77yM5oiR6YGH5Yiw5LqG5LiA5Lqb6Zeu6aKY77yM6K+356iN5ZCO5YaN6K+V44CC6ZSZ6K+v5L+h5oGv77yaJyArIChlcnJvci5yZXNwb25zZT8uZGF0YT8uZXJyb3I/Lm1lc3NhZ2UgfHwgZXJyb3IubWVzc2FnZSkNCiAgICAgICAgfSk7DQogICAgICB9IGZpbmFsbHkgew0KICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOw0KICAgICAgfQ0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["ChatBot.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ChatBot.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"chat-bot-container\" :class=\"{ 'chat-bot-minimized': isMinimized }\">\r\n    <!-- 悬浮窗头部 -->\r\n    <div class=\"chat-bot-header\" @click=\"toggleMinimize\">\r\n      <span class=\"chat-bot-title\">智能助手</span>\r\n      <div class=\"chat-bot-controls\">\r\n        <i :class=\"isMinimized ? 'el-icon-plus' : 'el-icon-minus'\" class=\"control-icon\"></i>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 聊天内容区域 -->\r\n    <div class=\"chat-bot-content\" v-show=\"!isMinimized\">\r\n      <div class=\"chat-messages\" ref=\"messageContainer\">\r\n        <div v-for=\"(message, index) in messages\" :key=\"index\" \r\n             :class=\"['message', message.type === 'user' ? 'user-message' : 'bot-message']\">\r\n          <div class=\"message-content\">{{ message.content }}</div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 输入区域 -->\r\n      <div class=\"chat-input-area\">\r\n        <el-input\r\n          v-model=\"userInput\"\r\n          type=\"textarea\"\r\n          :rows=\"2\"\r\n          placeholder=\"请输入您的问题...\"\r\n          @keyup.enter.native=\"sendMessage\"\r\n        ></el-input>\r\n        <el-button type=\"primary\" @click=\"sendMessage\" :disabled=\"!userInput.trim() || isLoading\">\r\n          {{ isLoading ? '发送中...' : '发送' }}\r\n        </el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'ChatBot',\r\n  data() {\r\n    return {\r\n      isMinimized: false,\r\n      userInput: '',\r\n      messages: [],\r\n      isLoading: false,\r\n      apiConfig: {\r\n        token: 'pat_ZR3dhICDUSMapWasnt1NKW29LcoyvZlRVdKZetwZ5moYxCdzZq8Ju8MUGZmQoF2A',\r\n        baseURL: 'https://api.coze.cn',\r\n        model: 'gpt-3.5-turbo'\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    // 添加欢迎消息\r\n    this.messages.push({\r\n      type: 'bot',\r\n      content: '您好！我是您的智能健身助手，请问有什么可以帮您？'\r\n    });\r\n  },\r\n  methods: {\r\n    toggleMinimize() {\r\n      this.isMinimized = !this.isMinimized;\r\n    },\r\n    async sendMessage() {\r\n      if (!this.userInput.trim() || this.isLoading) return;\r\n\r\n      // 添加用户消息\r\n      this.messages.push({\r\n        type: 'user',\r\n        content: this.userInput\r\n      });\r\n\r\n      const userMessage = this.userInput;\r\n      this.userInput = '';\r\n      this.isLoading = true;\r\n\r\n      try {\r\n        // 调用Coze API\r\n        const response = await axios.post(\r\n          `${this.apiConfig.baseURL}/api/chat/completions`,\r\n          {\r\n            model: this.apiConfig.model,\r\n            messages: [{\r\n              role: 'user',\r\n              content: userMessage\r\n            }],\r\n            temperature: 0.7,\r\n            max_tokens: 1000\r\n          },\r\n          {\r\n            headers: {\r\n              'Authorization': `Bearer ${this.apiConfig.token}`,\r\n              'Content-Type': 'application/json',\r\n              'Accept': 'application/json'\r\n            }\r\n          }\r\n        );\r\n\r\n        // 添加机器人回复\r\n        if (response.data && response.data.choices && response.data.choices[0]) {\r\n          this.messages.push({\r\n            type: 'bot',\r\n            content: response.data.choices[0].message.content\r\n          });\r\n        } else {\r\n          throw new Error('Invalid response format');\r\n        }\r\n\r\n        // 滚动到底部\r\n        this.$nextTick(() => {\r\n          const container = this.$refs.messageContainer;\r\n          container.scrollTop = container.scrollHeight;\r\n        });\r\n      } catch (error) {\r\n        console.error('Chat API error:', error);\r\n        this.messages.push({\r\n          type: 'bot',\r\n          content: '抱歉，我遇到了一些问题，请稍后再试。错误信息：' + (error.response?.data?.error?.message || error.message)\r\n        });\r\n      } finally {\r\n        this.isLoading = false;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.chat-bot-container {\r\n  position: fixed;\r\n  bottom: 20px;\r\n  right: 20px;\r\n  width: 350px;\r\n  background: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n  z-index: 1000;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.chat-bot-minimized {\r\n  width: 200px;\r\n}\r\n\r\n.chat-bot-header {\r\n  padding: 12px 16px;\r\n  background: #409EFF;\r\n  color: white;\r\n  border-radius: 8px 8px 0 0;\r\n  cursor: pointer;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.chat-bot-title {\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n}\r\n\r\n.control-icon {\r\n  font-size: 18px;\r\n}\r\n\r\n.chat-bot-content {\r\n  height: 400px;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.chat-messages {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 16px;\r\n}\r\n\r\n.message {\r\n  margin-bottom: 12px;\r\n  max-width: 80%;\r\n}\r\n\r\n.user-message {\r\n  margin-left: auto;\r\n}\r\n\r\n.bot-message {\r\n  margin-right: auto;\r\n}\r\n\r\n.message-content {\r\n  padding: 8px 12px;\r\n  border-radius: 8px;\r\n  background: #f4f4f5;\r\n  word-break: break-word;\r\n}\r\n\r\n.user-message .message-content {\r\n  background: #409EFF;\r\n  color: white;\r\n}\r\n\r\n.chat-input-area {\r\n  padding: 12px;\r\n  border-top: 1px solid #ebeef5;\r\n  display: flex;\r\n  gap: 8px;\r\n}\r\n\r\n.chat-input-area .el-button {\r\n  align-self: flex-end;\r\n}\r\n</style> "]}]}