{"remainingRequest":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\babel-loader\\lib\\index.js!E:\\SmartFitness\\smart-fitness-view\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\SmartFitness\\smart-fitness-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\SmartFitness\\smart-fitness-view\\src\\views\\user\\UserPostManage.vue?vue&type=script&setup=true&lang=js&","dependencies":[{"path":"E:\\SmartFitness\\smart-fitness-view\\src\\views\\user\\UserPostManage.vue","mtime":1748431485570},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1748086666483},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1748086666194},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1748086666483},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1748086671258},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1748086666483},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1748086666194},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1748086666483},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1748086671258}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgcmVmLCBvbk1vdW50ZWQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyBFbE1lc3NhZ2UsIEVsTWVzc2FnZUJveCB9IGZyb20gJ2VsZW1lbnQtcGx1cyc7CmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgeyBxdWVyeVVzZXJOZXdzLCBkZWxldGVVc2VyTmV3cyB9IGZyb20gJ0AvYXBpL25ld3MnOwppbXBvcnQgeyBmb3JtYXREYXRlIH0gZnJvbSAnQC91dGlscy9mb3JtYXQnOwpjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKY29uc3QgbG9hZGluZyA9IHJlZihmYWxzZSk7CmNvbnN0IHBvc3RMaXN0ID0gcmVmKFtdKTsKY29uc3QgdG90YWwgPSByZWYoMCk7CmNvbnN0IGNhdGVnb3J5T3B0aW9ucyA9IHJlZihbXSk7IC8vIOafpeivouWPguaVsAoKY29uc3QgcXVlcnlQYXJhbXMgPSByZWYoewogIHBhZ2VOdW06IDEsCiAgcGFnZVNpemU6IDEwLAogIG5hbWU6ICcnLAogIGNhdGVnb3J5SWQ6IHVuZGVmaW5lZCwKICBwdWJsaXNoZXJJZDogdW5kZWZpbmVkIC8vIOWwhuWcqG9uTW91bnRlZOS4reiuvue9rgoKfSk7IC8vIOiOt+WPluW4luWtkOWIl+ihqAoKY29uc3QgZ2V0TGlzdCA9IGFzeW5jICgpID0+IHsKICBsb2FkaW5nLnZhbHVlID0gdHJ1ZTsKCiAgdHJ5IHsKICAgIGNvbnN0IHJlcyA9IGF3YWl0IHF1ZXJ5VXNlck5ld3MocXVlcnlQYXJhbXMudmFsdWUpOwoKICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7CiAgICAgIHBvc3RMaXN0LnZhbHVlID0gcmVzLmRhdGEubGlzdDsKICAgICAgdG90YWwudmFsdWUgPSByZXMuZGF0YS50b3RhbDsKICAgIH0KICB9IGNhdGNoIChlcnJvcikgewogICAgY29uc29sZS5lcnJvcign6I635Y+W5biW5a2Q5YiX6KGo5aSx6LSlOicsIGVycm9yKTsKICB9IGZpbmFsbHkgewogICAgbG9hZGluZy52YWx1ZSA9IGZhbHNlOwogIH0KfTsgLy8g5p+l6K+i5oyJ6ZKu54K55Ye7CgoKY29uc3QgaGFuZGxlUXVlcnkgPSAoKSA9PiB7CiAgcXVlcnlQYXJhbXMudmFsdWUucGFnZU51bSA9IDE7CiAgZ2V0TGlzdCgpOwp9OyAvLyDph43nva7mjInpkq7ngrnlh7sKCgpjb25zdCByZXNldFF1ZXJ5ID0gKCkgPT4gewogIHF1ZXJ5UGFyYW1zLnZhbHVlID0gewogICAgcGFnZU51bTogMSwKICAgIHBhZ2VTaXplOiAxMCwKICAgIG5hbWU6ICcnLAogICAgY2F0ZWdvcnlJZDogdW5kZWZpbmVkLAogICAgcHVibGlzaGVySWQ6IHF1ZXJ5UGFyYW1zLnZhbHVlLnB1Ymxpc2hlcklkCiAgfTsKICBnZXRMaXN0KCk7Cn07IC8vIOafpeeci+W4luWtkAoKCmNvbnN0IGhhbmRsZVZpZXcgPSByb3cgPT4gewogIHJvdXRlci5wdXNoKGAvbmV3cy9kZXRhaWwvJHtyb3cuaWR9YCk7Cn07IC8vIOWIoOmZpOW4luWtkAoKCmNvbnN0IGhhbmRsZURlbGV0ZSA9IHJvdyA9PiB7CiAgRWxNZXNzYWdlQm94LmNvbmZpcm0oJ+ehruiupOimgeWIoOmZpOivpeW4luWtkOWQl++8nycsICforablkYonLCB7CiAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgIHR5cGU6ICd3YXJuaW5nJwogIH0pLnRoZW4oYXN5bmMgKCkgPT4gewogICAgdHJ5IHsKICAgICAgY29uc3QgcmVzID0gYXdhaXQgZGVsZXRlVXNlck5ld3Mocm93LmlkKTsKCiAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoJ+WIoOmZpOaIkOWKnycpOwogICAgICAgIGdldExpc3QoKTsKICAgICAgfQogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgY29uc29sZS5lcnJvcign5Yig6Zmk5biW5a2Q5aSx6LSlOicsIGVycm9yKTsKICAgIH0KICB9KTsKfTsgLy8g5YiG6aG15aSn5bCP5pS55Y+YCgoKY29uc3QgaGFuZGxlU2l6ZUNoYW5nZSA9IHZhbCA9PiB7CiAgcXVlcnlQYXJhbXMudmFsdWUucGFnZVNpemUgPSB2YWw7CiAgZ2V0TGlzdCgpOwp9OyAvLyDpobXnoIHmlLnlj5gKCgpjb25zdCBoYW5kbGVDdXJyZW50Q2hhbmdlID0gdmFsID0+IHsKICBxdWVyeVBhcmFtcy52YWx1ZS5wYWdlTnVtID0gdmFsOwogIGdldExpc3QoKTsKfTsKCm9uTW91bnRlZCgoKSA9PiB7CiAgLy8g6K6+572u5b2T5YmN55So5oi3SUQKICBxdWVyeVBhcmFtcy52YWx1ZS5wdWJsaXNoZXJJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VySWQnKTsKICBnZXRMaXN0KCk7Cn0pOw=="},{"version":3,"sources":["UserPostManage.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"user-post-manage\">\r\n    <el-card class=\"box-card\">\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span>我的帖子管理</span>\r\n        </div>\r\n      </template>\r\n      \r\n      <!-- 搜索栏 -->\r\n      <div class=\"search-bar\">\r\n        <el-form :inline=\"true\" :model=\"queryParams\" class=\"demo-form-inline\">\r\n          <el-form-item label=\"标题\">\r\n            <el-input v-model=\"queryParams.name\" placeholder=\"请输入标题\" clearable />\r\n          </el-form-item>\r\n          <el-form-item label=\"分类\">\r\n            <el-select v-model=\"queryParams.categoryId\" placeholder=\"请选择分类\" clearable>\r\n              <el-option\r\n                v-for=\"item in categoryOptions\"\r\n                :key=\"item.id\"\r\n                :label=\"item.name\"\r\n                :value=\"item.id\"\r\n              />\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\" @click=\"handleQuery\">查询</el-button>\r\n            <el-button @click=\"resetQuery\">重置</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n\r\n      <!-- 帖子列表 -->\r\n      <el-table :data=\"postList\" style=\"width: 100%\" v-loading=\"loading\">\r\n        <el-table-column prop=\"coverUrl\" label=\"封面\" width=\"120\">\r\n          <template #default=\"scope\">\r\n            <el-image \r\n              style=\"width: 100px; height: 60px\"\r\n              :src=\"scope.row.coverUrl\"\r\n              :preview-src-list=\"[scope.row.coverUrl]\"\r\n              fit=\"cover\"\r\n            />\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"categoryName\" label=\"分类\" width=\"120\" />\r\n        <el-table-column prop=\"name\" label=\"标题\" min-width=\"200\" />\r\n        <el-table-column prop=\"createTime\" label=\"发布时间\" width=\"180\">\r\n          <template #default=\"scope\">\r\n            {{ formatDate(scope.row.createTime) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"viewsNumber\" label=\"浏览量\" width=\"100\" />\r\n        <el-table-column label=\"操作\" width=\"150\" fixed=\"right\">\r\n          <template #default=\"scope\">\r\n            <el-button\r\n              type=\"primary\"\r\n              link\r\n              @click=\"handleView(scope.row)\"\r\n            >\r\n              查看\r\n            </el-button>\r\n            <el-button\r\n              type=\"danger\"\r\n              link\r\n              @click=\"handleDelete(scope.row)\"\r\n            >\r\n              删除\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 分页 -->\r\n      <div class=\"pagination-container\">\r\n        <el-pagination\r\n          v-model:current-page=\"queryParams.pageNum\"\r\n          v-model:page-size=\"queryParams.pageSize\"\r\n          :page-sizes=\"[10, 20, 30, 50]\"\r\n          :total=\"total\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n        />\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport { useRouter } from 'vue-router'\r\nimport { queryUserNews, deleteUserNews } from '@/api/news'\r\nimport { formatDate } from '@/utils/format'\r\n\r\nconst router = useRouter()\r\nconst loading = ref(false)\r\nconst postList = ref([])\r\nconst total = ref(0)\r\nconst categoryOptions = ref([])\r\n\r\n// 查询参数\r\nconst queryParams = ref({\r\n  pageNum: 1,\r\n  pageSize: 10,\r\n  name: '',\r\n  categoryId: undefined,\r\n  publisherId: undefined // 将在onMounted中设置\r\n})\r\n\r\n// 获取帖子列表\r\nconst getList = async () => {\r\n  loading.value = true\r\n  try {\r\n    const res = await queryUserNews(queryParams.value)\r\n    if (res.code === 200) {\r\n      postList.value = res.data.list\r\n      total.value = res.data.total\r\n    }\r\n  } catch (error) {\r\n    console.error('获取帖子列表失败:', error)\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// 查询按钮点击\r\nconst handleQuery = () => {\r\n  queryParams.value.pageNum = 1\r\n  getList()\r\n}\r\n\r\n// 重置按钮点击\r\nconst resetQuery = () => {\r\n  queryParams.value = {\r\n    pageNum: 1,\r\n    pageSize: 10,\r\n    name: '',\r\n    categoryId: undefined,\r\n    publisherId: queryParams.value.publisherId\r\n  }\r\n  getList()\r\n}\r\n\r\n// 查看帖子\r\nconst handleView = (row) => {\r\n  router.push(`/news/detail/${row.id}`)\r\n}\r\n\r\n// 删除帖子\r\nconst handleDelete = (row) => {\r\n  ElMessageBox.confirm(\r\n    '确认要删除该帖子吗？',\r\n    '警告',\r\n    {\r\n      confirmButtonText: '确定',\r\n      cancelButtonText: '取消',\r\n      type: 'warning',\r\n    }\r\n  ).then(async () => {\r\n    try {\r\n      const res = await deleteUserNews(row.id)\r\n      if (res.code === 200) {\r\n        ElMessage.success('删除成功')\r\n        getList()\r\n      }\r\n    } catch (error) {\r\n      console.error('删除帖子失败:', error)\r\n    }\r\n  })\r\n}\r\n\r\n// 分页大小改变\r\nconst handleSizeChange = (val) => {\r\n  queryParams.value.pageSize = val\r\n  getList()\r\n}\r\n\r\n// 页码改变\r\nconst handleCurrentChange = (val) => {\r\n  queryParams.value.pageNum = val\r\n  getList()\r\n}\r\n\r\nonMounted(() => {\r\n  // 设置当前用户ID\r\n  queryParams.value.publisherId = localStorage.getItem('userId')\r\n  getList()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.user-post-manage {\r\n  padding: 20px;\r\n}\r\n\r\n.search-bar {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.pagination-container {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n</style> "],"sourceRoot":"src/views/user"}]}