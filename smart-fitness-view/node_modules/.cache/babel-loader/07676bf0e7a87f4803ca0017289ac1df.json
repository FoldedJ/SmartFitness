{"remainingRequest":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\babel-loader\\lib\\index.js!E:\\SmartFitness\\smart-fitness-view\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\SmartFitness\\smart-fitness-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\SmartFitness\\smart-fitness-view\\src\\components\\CozeAssistant.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\SmartFitness\\smart-fitness-view\\src\\components\\CozeAssistant.vue","mtime":1749653602753},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749639512193},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1749639511518},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749639512193},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1749639525774}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8g5L2/55SoIHJlcXVpcmUg5a+85YWlCmNvbnN0IHsKICBDb3plQVBJCn0gPSByZXF1aXJlKCdAY296ZS9hcGknKTsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ296ZUFzc2lzdGFudCcsCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc09wZW46IGZhbHNlLAogICAgICB1c2VySW5wdXQ6ICcnLAogICAgICBtZXNzYWdlczogW3sKICAgICAgICB0eXBlOiAnYXNzaXN0YW50JywKICAgICAgICBjb250ZW50OiAn5oKo5aW977yM5oiR5piv5oKo55qE5pm66IO95YGl5bq35Yqp5omL77yM5pyJ5LuA5LmI5Y+v5Lul5biu5oKo55qE5ZCX77yfJwogICAgICB9XSwKICAgICAgYXBpQ2xpZW50OiBudWxsLAogICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICBpbnB1dE1lc3NhZ2U6ICcnLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZXJyb3I6IG51bGwsCiAgICAgIGNsaWVudDogbnVsbCwKICAgICAgaXNDb25uZWN0ZWQ6IGZhbHNlLAogICAgICByZWNvbm5lY3RBdHRlbXB0czogMCwKICAgICAgbWF4UmVjb25uZWN0QXR0ZW1wdHM6IDUsCiAgICAgIHJlY29ubmVjdERlbGF5OiAzMDAwLAogICAgICByZWNvbm5lY3RUaW1lcjogbnVsbCwKICAgICAgbWVzc2FnZVF1ZXVlOiBbXSwKICAgICAgcHJvY2Vzc2luZ1F1ZXVlOiBmYWxzZSwKICAgICAgYm90SWQ6ICc3MzU5NzgwMTA1NDAxOTU4NDAwJywKICAgICAgLy8g5pu/5o2i5Li65L2g55qE5py65Zmo5Lq6SUQKICAgICAgYXBpVG9rZW46ICdjb3plX2V5SmhiR2NpT2lKSVV6STFOaUlzSW5SNWNDSTZJa3BYVkNKOS5leUpwWkNJNklqY3pOVGszT0RBeE1EVTBNREU1TlRnME1EQWlMQ0pwWVhRaU9qRTNNems1TWpRNU56QXNJbVY0Y0NJNk1UYzBNRFV6TURBd01IMC4yUUo1UUo1UUo1UUo1UUo1UUo1UUo1UUo1UUo1UUo1UUo1UUo1UUo1UUo1UUo1UScgLy8g5pu/5o2i5Li65L2g55qEQVBJIFRva2VuCgogICAgfTsKICB9LAoKICBhc3luYyBjcmVhdGVkKCkgewogICAgdHJ5IHsKICAgICAgY29uc29sZS5sb2coJ+WIneWni+WMlkNvemVBUEnlrqLmiLfnq68uLi4nKTsgLy8g5Yid5aeL5YyWIENvemVBUEkg5a6i5oi356uvCgogICAgICB0aGlzLmNsaWVudCA9IG5ldyBDb3plQVBJKHsKICAgICAgICBib3RJZDogdGhpcy5ib3RJZCwKICAgICAgICBhcGlUb2tlbjogdGhpcy5hcGlUb2tlbgogICAgICB9KTsKICAgICAgY29uc29sZS5sb2coJ0NvemVBUEnlrqLmiLfnq6/liJ3lp4vljJbmiJDlip8nKTsgLy8g6L+e5o6lV2ViU29ja2V0CgogICAgICBhd2FpdCB0aGlzLmNvbm5lY3RXZWJTb2NrZXQoKTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoJ+WIneWni+WMluWksei0pTonLCBlcnJvcik7CiAgICAgIHRoaXMuZXJyb3IgPSAn5pm66IO95Yqp5omL5Yid5aeL5YyW5aSx6LSl77yM6K+35Yi35paw6aG16Z2i6YeN6K+V44CC6ZSZ6K+v6K+m5oOFOiAnICsgZXJyb3IubWVzc2FnZTsKICAgIH0KICB9LAoKICBtZXRob2RzOiB7CiAgICB0b2dnbGVBc3Npc3RhbnQoKSB7CiAgICAgIHRoaXMuaXNPcGVuID0gIXRoaXMuaXNPcGVuOwogICAgfSwKCiAgICBhc3luYyBzZW5kTWVzc2FnZSgpIHsKICAgICAgaWYgKCF0aGlzLnVzZXJJbnB1dC50cmltKCkgfHwgdGhpcy5pc0xvYWRpbmcpIHJldHVybjsgLy8g5qOA5p+lYXBpQ2xpZW505piv5ZCm5q2j56Gu5Yid5aeL5YyWCgogICAgICBpZiAoIXRoaXMuY2xpZW50KSB7CiAgICAgICAgY29uc3QgZXJyb3JNc2cgPSAn5pm66IO95Yqp5omL5pyq5q2j56Gu5Yid5aeL5YyW77yM6K+35Yi35paw6aG16Z2i6YeN6K+VJzsKICAgICAgICBjb25zb2xlLmVycm9yKCfmmbrog73liqnmiYvmnKrmraPnoa7liJ3lp4vljJbvvIxhcGlDbGllbnTkuI3lrZjlnKgnKTsKICAgICAgICB0aGlzLm1lc3NhZ2VzLnB1c2goewogICAgICAgICAgdHlwZTogJ2Fzc2lzdGFudCcsCiAgICAgICAgICBjb250ZW50OiBlcnJvck1zZwogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfSAvLyDmt7vliqDnlKjmiLfmtojmga8KCgogICAgICB0aGlzLm1lc3NhZ2VzLnB1c2goewogICAgICAgIHR5cGU6ICd1c2VyJywKICAgICAgICBjb250ZW50OiB0aGlzLnVzZXJJbnB1dAogICAgICB9KTsKICAgICAgY29uc3QgdXNlclF1ZXN0aW9uID0gdGhpcy51c2VySW5wdXQ7CiAgICAgIHRoaXMudXNlcklucHV0ID0gJyc7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsgLy8g5re75Yqg5Li05pe25Yqg6L295raI5oGvCgogICAgICBjb25zdCBsb2FkaW5nTXNnSW5kZXggPSB0aGlzLm1lc3NhZ2VzLmxlbmd0aDsKICAgICAgdGhpcy5tZXNzYWdlcy5wdXNoKHsKICAgICAgICB0eXBlOiAnYXNzaXN0YW50JywKICAgICAgICBjb250ZW50OiAn5q2j5Zyo5oCd6ICDLi4uJwogICAgICB9KTsKCiAgICAgIHRyeSB7CiAgICAgICAgY29uc29sZS5sb2coJ+WPkemAgemXrumimDonLCB1c2VyUXVlc3Rpb24pOyAvLyDkvb/nlKggY2hhdCDmjqXlj6PvvIzmt7vliqAgYm90X2lkCgogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuY2xpZW50LmNoYXQuY3JlYXRlKHsKICAgICAgICAgIGJvdF9pZDogJzc1MTQ2MTMwMzI5MzMyNzc3MzEnLAogICAgICAgICAgbWVzc2FnZXM6IFt7CiAgICAgICAgICAgIHJvbGU6ICd1c2VyJywKICAgICAgICAgICAgY29udGVudDogdXNlclF1ZXN0aW9uCiAgICAgICAgICB9XQogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUubG9nKCdBUEnlrozmlbTlk43lupQ6JywgSlNPTi5zdHJpbmdpZnkocmVzLCBudWxsLCAyKSk7IC8vIOajgOafpeWTjeW6lOagvOW8jwoKICAgICAgICBpZiAoIXJlcykgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBUEnlk43lupTkuLrnqbonKTsKICAgICAgICB9IC8vIOWkhOeQhui/m+ihjOS4reeahOeKtuaAge+8jOmcgOimgei9ruivouiOt+WPlue7k+aenAoKCiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09ICdpbl9wcm9ncmVzcycgJiYgcmVzLmlkKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygn5a+56K+d5q2j5Zyo6L+b6KGM5Lit77yM5byA5aeL6L2u6K+i6I635Y+W57uT5p6cLi4uJyk7CiAgICAgICAgICBsZXQgcnVuSWQgPSByZXMuaWQ7CiAgICAgICAgICBsZXQgbWF4UmV0cmllcyA9IDEwOwogICAgICAgICAgbGV0IHJldHJ5Q291bnQgPSAwOwogICAgICAgICAgbGV0IG91dHB1dCA9ICcnOyAvLyDova7or6Lojrflj5bnu5PmnpwKCiAgICAgICAgICB3aGlsZSAocmV0cnlDb3VudCA8IG1heFJldHJpZXMpIHsKICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKTsgLy8g562J5b6FMeenkgoKICAgICAgICAgICAgcmV0cnlDb3VudCsrOwoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg56ysJHtyZXRyeUNvdW50feasoei9ruivouiOt+WPlue7k+aenC4uLmApOwogICAgICAgICAgICAgIGNvbnN0IHBvbGxSZXMgPSBhd2FpdCB0aGlzLmNsaWVudC5jaGF0LnJldHJpZXZlKHsKICAgICAgICAgICAgICAgIGlkOiBydW5JZAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfova7or6Llk43lupQ6JywgSlNPTi5zdHJpbmdpZnkocG9sbFJlcywgbnVsbCwgMikpOyAvLyDmo4Dmn6XmmK/lkKblrozmiJAKCiAgICAgICAgICAgICAgaWYgKHBvbGxSZXMuc3RhdHVzID09PSAnY29tcGxldGVkJyAmJiBwb2xsUmVzLmNob2ljZXMgJiYgcG9sbFJlcy5jaG9pY2VzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIG91dHB1dCA9IHBvbGxSZXMuY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQ7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn6I635Y+W5Yiw5pyA57uI57uT5p6cOicsIG91dHB1dCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBvbGxSZXMuc3RhdHVzID09PSAnZmFpbGVkJykgewogICAgICAgICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBwb2xsUmVzLmxhc3RfZXJyb3IgJiYgcG9sbFJlcy5sYXN0X2Vycm9yLm1zZyA/IHBvbGxSZXMubGFzdF9lcnJvci5tc2cgOiAn5pyq55+l6ZSZ6K+vJzsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5a+56K+d5aSE55CG5aSx6LSlOiAnICsgZXJyb3JNc2cpOwogICAgICAgICAgICAgIH0gLy8g57un57ut562J5b6FCgoKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg5a+56K+d5LuN5Zyo5aSE55CG5Lit77yM57un57ut562J5b6FLi4uICgke3JldHJ5Q291bnR9LyR7bWF4UmV0cmllc30pYCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKHBvbGxFcnJvcikgewogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+i9ruivoui/h+eoi+S4reWHuumUmTonLCBwb2xsRXJyb3IpOwogICAgICAgICAgICAgIHRocm93IHBvbGxFcnJvcjsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGlmICghb3V0cHV0KSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign6I635Y+W5a+56K+d57uT5p6c6LaF5pe277yM6K+356iN5ZCO5YaN6K+VJyk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHRoaXMuJHNldCh0aGlzLm1lc3NhZ2VzLCBsb2FkaW5nTXNnSW5kZXgsIHsKICAgICAgICAgICAgdHlwZTogJ2Fzc2lzdGFudCcsCiAgICAgICAgICAgIGNvbnRlbnQ6IG91dHB1dAogICAgICAgICAgfSk7CiAgICAgICAgfSAvLyDlsJ3or5XkuI3lkIznmoTlk43lupTmoLzlvI8KCgogICAgICAgIGxldCBvdXRwdXQgPSAnJzsKCiAgICAgICAgaWYgKHJlcy5jaG9pY2VzICYmIHJlcy5jaG9pY2VzLmxlbmd0aCA+IDAgJiYgcmVzLmNob2ljZXNbMF0ubWVzc2FnZSkgewogICAgICAgICAgb3V0cHV0ID0gcmVzLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50OwogICAgICAgIH0gZWxzZSBpZiAocmVzLmRhdGEgJiYgcmVzLmRhdGEub3V0cHV0KSB7CiAgICAgICAgICBvdXRwdXQgPSByZXMuZGF0YS5vdXRwdXQ7CiAgICAgICAgfSBlbHNlIGlmIChyZXMub3V0cHV0KSB7CiAgICAgICAgICBvdXRwdXQgPSByZXMub3V0cHV0OwogICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHJlcyA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIG91dHB1dCA9IHJlczsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5lcnJvcign5peg5rOV6K+G5Yir55qE5ZON5bqU5qC85byPOicsIHJlcyk7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+aXoOazleivhuWIq+eahOWTjeW6lOagvOW8j++8jOivt+ajgOafpUFQSeaWh+ahoycpOwogICAgICAgIH0KCiAgICAgICAgY29uc29sZS5sb2coJ+WkhOeQhuWQjueahOWTjeW6lDonLCBvdXRwdXQpOwogICAgICAgIHRoaXMuJHNldCh0aGlzLm1lc3NhZ2VzLCBsb2FkaW5nTXNnSW5kZXgsIHsKICAgICAgICAgIHR5cGU6ICdhc3Npc3RhbnQnLAogICAgICAgICAgY29udGVudDogb3V0cHV0CiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignQ296ZSBBUEnosIPnlKjlpLHotKU6JywgZXJyb3IpOwogICAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSAn5oqx5q2J77yM5pyN5Yqh5pqC5pe25LiN5Y+v55So77yM6K+356iN5ZCO5YaN6K+V44CCJzsKCiAgICAgICAgaWYgKGVycm9yICYmIGVycm9yLmNvZGUgPT09IDQwMTUpIHsKICAgICAgICAgIGVycm9yTWVzc2FnZSA9ICfmirHmrYnvvIzmmbrog73liqnmiYvlsJrmnKrlrozmiJDphY3nva7vvIzor7fnqI3lkI7lho3or5XjgIInOwogICAgICAgICAgY29uc29sZS5lcnJvcign5py65Zmo5Lq65pyq5Y+R5biD5YiwQVBJ5rig6YGT77yM6K+35YWI5ZyoQ296ZeW5s+WPsOWPkeW4g+acuuWZqOS6uicpOwogICAgICAgIH0gZWxzZSBpZiAoZXJyb3IgJiYgZXJyb3IubWVzc2FnZSkgewogICAgICAgICAgY29uc29sZS5sb2coJ+mUmeivr+ivpuaDhTonLCBlcnJvci5tZXNzYWdlKTsKICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGDmirHmrYnvvIzlj5HnlJ/kuobplJnor686ICR7ZXJyb3IubWVzc2FnZX1gOwogICAgICAgIH0KCiAgICAgICAgdGhpcy4kc2V0KHRoaXMubWVzc2FnZXMsIGxvYWRpbmdNc2dJbmRleCwgewogICAgICAgICAgdHlwZTogJ2Fzc2lzdGFudCcsCiAgICAgICAgICBjb250ZW50OiBlcnJvck1lc3NhZ2UKICAgICAgICB9KTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgIGlmICh0aGlzLiRyZWZzLm1lc3NhZ2VzQ29udGFpbmVyKSB7CiAgICAgICAgICAgIHRoaXMuJHJlZnMubWVzc2FnZXNDb250YWluZXIuc2Nyb2xsVG9wID0gdGhpcy4kcmVmcy5tZXNzYWdlc0NvbnRhaW5lci5zY3JvbGxIZWlnaHQ7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgY29ubmVjdFdlYlNvY2tldCgpIHsvLyDlrp7njrBXZWJTb2NrZXTov57mjqXpgLvovpEKICAgIH0KCiAgfQp9Ow=="},{"version":3,"sources":["CozeAssistant.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"coze-assistant-container\" :class=\"{ 'coze-assistant-open': isOpen }\">\n    <div class=\"coze-assistant-toggle\" @click=\"toggleAssistant\">\n      <i :class=\"isOpen ? 'el-icon-close' : 'el-icon-s-comment'\"></i>\n    </div>\n    <div class=\"coze-assistant-content\" v-if=\"isOpen\">\n      <div class=\"coze-assistant-header\">\n        <span>智能助手</span>\n      </div>\n      <div class=\"coze-assistant-body\">\n        <div class=\"coze-assistant-messages\" ref=\"messagesContainer\">\n          <div v-for=\"(message, index) in messages\" :key=\"index\" class=\"message\" :class=\"message.type\">\n            <div class=\"message-content\">{{ message.content }}</div>\n          </div>\n        </div>\n        <div class=\"coze-assistant-input\">\n          <el-input\n            v-model=\"userInput\"\n            placeholder=\"请输入您的问题...\"\n            @keyup.enter.native=\"sendMessage\"\n          ></el-input>\n          <el-button type=\"primary\" icon=\"el-icon-s-promotion\" @click=\"sendMessage\"></el-button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n// 使用 require 导入\nconst { CozeAPI } = require('@coze/api');\n\nexport default {\n  name: 'CozeAssistant',\n  data() {\n    return {\n      isOpen: false,\n      userInput: '',\n      messages: [\n        { type: 'assistant', content: '您好，我是您的智能健康助手，有什么可以帮您的吗？' }\n      ],\n      apiClient: null,\n      isLoading: false,\n      inputMessage: '',\n      loading: false,\n      error: null,\n      client: null,\n      isConnected: false,\n      reconnectAttempts: 0,\n      maxReconnectAttempts: 5,\n      reconnectDelay: 3000,\n      reconnectTimer: null,\n      messageQueue: [],\n      processingQueue: false,\n      botId: '7359780105401958400', // 替换为你的机器人ID\n      apiToken: 'coze_eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjczNTk3ODAxMDU0MDE5NTg0MDAiLCJpYXQiOjE3Mzk5MjQ5NzAsImV4cCI6MTc0MDUzMDAwMH0.2QJ5QJ5QJ5QJ5QJ5QJ5QJ5QJ5QJ5QJ5QJ5QJ5QJ5QJ5QJ5Q', // 替换为你的API Token\n    };\n  },\n  async created() {\n    try {\n      console.log('初始化CozeAPI客户端...');\n      \n      // 初始化 CozeAPI 客户端\n      this.client = new CozeAPI({\n        botId: this.botId,\n        apiToken: this.apiToken,\n      });\n      \n      console.log('CozeAPI客户端初始化成功');\n      \n      // 连接WebSocket\n      await this.connectWebSocket();\n      \n    } catch (error) {\n      console.error('初始化失败:', error);\n      this.error = '智能助手初始化失败，请刷新页面重试。错误详情: ' + error.message;\n    }\n  },\n  methods: {\n    toggleAssistant() {\n      this.isOpen = !this.isOpen;\n    },\n    async sendMessage() {\n      if (!this.userInput.trim() || this.isLoading) return;\n      \n      // 检查apiClient是否正确初始化\n      if (!this.client) {\n        const errorMsg = '智能助手未正确初始化，请刷新页面重试';\n        console.error('智能助手未正确初始化，apiClient不存在');\n        this.messages.push({ \n          type: 'assistant', \n          content: errorMsg \n        });\n        return;\n      }\n      \n      // 添加用户消息\n      this.messages.push({ type: 'user', content: this.userInput });\n      const userQuestion = this.userInput;\n      this.userInput = '';\n      this.isLoading = true;\n      \n      // 添加临时加载消息\n      const loadingMsgIndex = this.messages.length;\n      this.messages.push({ type: 'assistant', content: '正在思考...' });\n      \n      try {\n        console.log('发送问题:', userQuestion);\n        \n        // 使用 chat 接口，添加 bot_id\n        const res = await this.client.chat.create({\n          bot_id: '7514613032933277731',\n          messages: [{\n            role: 'user',\n            content: userQuestion\n          }]\n        });\n        \n        console.log('API完整响应:', JSON.stringify(res, null, 2));\n        \n        // 检查响应格式\n        if (!res) {\n          throw new Error('API响应为空');\n        }\n        \n        // 处理进行中的状态，需要轮询获取结果\n        if (res.status === 'in_progress' && res.id) {\n          console.log('对话正在进行中，开始轮询获取结果...');\n          let runId = res.id;\n          let maxRetries = 10;\n          let retryCount = 0;\n          let output = '';\n          \n          // 轮询获取结果\n          while (retryCount < maxRetries) {\n            await new Promise(resolve => setTimeout(resolve, 1000)); // 等待1秒\n            retryCount++;\n            \n            try {\n              console.log(`第${retryCount}次轮询获取结果...`);\n              const pollRes = await this.client.chat.retrieve({\n                id: runId\n              });\n              \n              console.log('轮询响应:', JSON.stringify(pollRes, null, 2));\n              \n              // 检查是否完成\n              if (pollRes.status === 'completed' && pollRes.choices && pollRes.choices.length > 0) {\n                output = pollRes.choices[0].message.content;\n                console.log('获取到最终结果:', output);\n                break;\n              } else if (pollRes.status === 'failed') {\n                const errorMsg = pollRes.last_error && pollRes.last_error.msg ? pollRes.last_error.msg : '未知错误';\n                throw new Error('对话处理失败: ' + errorMsg);\n              }\n              \n              // 继续等待\n              console.log(`对话仍在处理中，继续等待... (${retryCount}/${maxRetries})`);\n            } catch (pollError) {\n              console.error('轮询过程中出错:', pollError);\n              throw pollError;\n            }\n          }\n          \n          if (!output) {\n            throw new Error('获取对话结果超时，请稍后再试');\n          }\n          \n          return this.$set(this.messages, loadingMsgIndex, { \n            type: 'assistant', \n            content: output\n          });\n        }\n        \n        // 尝试不同的响应格式\n        let output = '';\n        if (res.choices && res.choices.length > 0 && res.choices[0].message) {\n          output = res.choices[0].message.content;\n        } else if (res.data && res.data.output) {\n          output = res.data.output;\n        } else if (res.output) {\n          output = res.output;\n        } else if (typeof res === 'string') {\n          output = res;\n        } else {\n          console.error('无法识别的响应格式:', res);\n          throw new Error('无法识别的响应格式，请检查API文档');\n        }\n        \n        console.log('处理后的响应:', output);\n        \n        this.$set(this.messages, loadingMsgIndex, { \n          type: 'assistant', \n          content: output\n        });\n      } catch (error) {\n        console.error('Coze API调用失败:', error);\n        let errorMessage = '抱歉，服务暂时不可用，请稍后再试。';\n        \n        if (error && error.code === 4015) {\n          errorMessage = '抱歉，智能助手尚未完成配置，请稍后再试。';\n          console.error('机器人未发布到API渠道，请先在Coze平台发布机器人');\n        } else if (error && error.message) {\n          console.log('错误详情:', error.message);\n          errorMessage = `抱歉，发生了错误: ${error.message}`;\n        }\n        \n        this.$set(this.messages, loadingMsgIndex, { \n          type: 'assistant', \n          content: errorMessage\n        });\n      } finally {\n        this.isLoading = false;\n        this.$nextTick(() => {\n          if (this.$refs.messagesContainer) {\n            this.$refs.messagesContainer.scrollTop = this.$refs.messagesContainer.scrollHeight;\n          }\n        });\n      }\n    },\n    async connectWebSocket() {\n      // 实现WebSocket连接逻辑\n    }\n  }\n};\n</script>\n\n<style scoped>\n.coze-assistant-container {\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  z-index: 1000;\n}\n\n.coze-assistant-toggle {\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  background-color: #15559a;\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n}\n\n.coze-assistant-toggle i {\n  font-size: 24px;\n}\n\n.coze-assistant-content {\n  position: absolute;\n  bottom: 60px;\n  right: 0;\n  width: 350px;\n  height: 450px;\n  background-color: white;\n  border-radius: 8px;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.coze-assistant-header {\n  padding: 10px 15px;\n  background-color: #15559a;\n  color: white;\n  font-weight: bold;\n}\n\n.coze-assistant-body {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n  overflow: hidden;\n}\n\n.coze-assistant-messages {\n  flex: 1;\n  overflow-y: auto;\n  padding: 10px;\n}\n\n.message {\n  margin-bottom: 10px;\n  max-width: 80%;\n}\n\n.message.user {\n  margin-left: auto;\n}\n\n.message.assistant {\n  margin-right: auto;\n}\n\n.message-content {\n  padding: 8px 12px;\n  border-radius: 18px;\n  display: inline-block;\n  word-break: break-word;\n}\n\n.user .message-content {\n  background-color: #15559a;\n  color: white;\n}\n\n.assistant .message-content {\n  background-color: #f2f2f2;\n  color: #333;\n}\n\n.coze-assistant-input {\n  display: flex;\n  margin-top: 10px;\n}\n\n.coze-assistant-input .el-input {\n  flex: 1;\n  margin-right: 10px;\n}\n</style>"],"sourceRoot":"src/components"}]}