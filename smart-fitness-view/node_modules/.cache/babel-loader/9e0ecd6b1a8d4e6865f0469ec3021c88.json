{"remainingRequest":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\babel-loader\\lib\\index.js!E:\\SmartFitness\\smart-fitness-view\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\SmartFitness\\smart-fitness-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\SmartFitness\\smart-fitness-view\\src\\components\\ChatBot.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\SmartFitness\\smart-fitness-view\\src\\components\\ChatBot.vue","mtime":1749639942885},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749639512193},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1749639511518},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1749639512193},{"path":"E:\\SmartFitness\\smart-fitness-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1749639525774}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgQ296ZUFQSSB9IGZyb20gJ0Bjb3plL2FwaSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ2hhdEJvdCcsCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc01pbmltaXplZDogZmFsc2UsCiAgICAgIHVzZXJJbnB1dDogJycsCiAgICAgIG1lc3NhZ2VzOiBbXSwKICAgICAgYXBpQ2xpZW50OiBuZXcgQ296ZUFQSSh7CiAgICAgICAgdG9rZW46ICdwYXRfWlIzZGhJQ0RVU01hcFdhc250MU5LVzI5TGNveXZabFJWZEtaZXR3WjVtb1l4Q2R6WnE4SnU4TVVHWm1Rb0YyQScsCiAgICAgICAgYmFzZVVSTDogJ2h0dHBzOi8vYXBpLmNvemUuY24nCiAgICAgIH0pCiAgICB9OwogIH0sCgogIG1ldGhvZHM6IHsKICAgIHRvZ2dsZU1pbmltaXplKCkgewogICAgICB0aGlzLmlzTWluaW1pemVkID0gIXRoaXMuaXNNaW5pbWl6ZWQ7CiAgICB9LAoKICAgIGFzeW5jIHNlbmRNZXNzYWdlKCkgewogICAgICBpZiAoIXRoaXMudXNlcklucHV0LnRyaW0oKSkgcmV0dXJuOyAvLyDmt7vliqDnlKjmiLfmtojmga8KCiAgICAgIHRoaXMubWVzc2FnZXMucHVzaCh7CiAgICAgICAgdHlwZTogJ3VzZXInLAogICAgICAgIGNvbnRlbnQ6IHRoaXMudXNlcklucHV0CiAgICAgIH0pOwogICAgICBjb25zdCB1c2VyTWVzc2FnZSA9IHRoaXMudXNlcklucHV0OwogICAgICB0aGlzLnVzZXJJbnB1dCA9ICcnOwoKICAgICAgdHJ5IHsKICAgICAgICAvLyDosIPnlKhDb3plIEFQSQogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuY2hhdCh7CiAgICAgICAgICBtZXNzYWdlczogW3sKICAgICAgICAgICAgcm9sZTogJ3VzZXInLAogICAgICAgICAgICBjb250ZW50OiB1c2VyTWVzc2FnZQogICAgICAgICAgfV0KICAgICAgICB9KTsgLy8g5re75Yqg5py65Zmo5Lq65Zue5aSNCgogICAgICAgIHRoaXMubWVzc2FnZXMucHVzaCh7CiAgICAgICAgICB0eXBlOiAnYm90JywKICAgICAgICAgIGNvbnRlbnQ6IHJlc3BvbnNlLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50CiAgICAgICAgfSk7IC8vIOa7muWKqOWIsOW6lemDqAoKICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLiRyZWZzLm1lc3NhZ2VDb250YWluZXI7CiAgICAgICAgICBjb250YWluZXIuc2Nyb2xsVG9wID0gY29udGFpbmVyLnNjcm9sbEhlaWdodDsKICAgICAgICB9KTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdDaGF0IEFQSSBlcnJvcjonLCBlcnJvcik7CiAgICAgICAgdGhpcy5tZXNzYWdlcy5wdXNoKHsKICAgICAgICAgIHR5cGU6ICdib3QnLAogICAgICAgICAgY29udGVudDogJ+aKseatie+8jOaIkemBh+WIsOS6huS4gOS6m+mXrumimO+8jOivt+eojeWQjuWGjeivleOAgicKICAgICAgICB9KTsKICAgICAgfQogICAgfQoKICB9Cn07"},{"version":3,"sources":["ChatBot.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA,SAAA,OAAA,QAAA,WAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;;AAEA,EAAA,IAAA,GAAA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,KADA;AAEA,MAAA,SAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA,EAHA;AAIA,MAAA,SAAA,EAAA,IAAA,OAAA,CAAA;AACA,QAAA,KAAA,EAAA,sEADA;AAEA,QAAA,OAAA,EAAA;AAFA,OAAA;AAJA,KAAA;AASA,GAZA;;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,cAAA,GAAA;AACA,WAAA,WAAA,GAAA,CAAA,KAAA,WAAA;AACA,KAHA;;AAIA,UAAA,WAAA,GAAA;AACA,UAAA,CAAA,KAAA,SAAA,CAAA,IAAA,EAAA,EAAA,OADA,CAGA;;AACA,WAAA,QAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA,MADA;AAEA,QAAA,OAAA,EAAA,KAAA;AAFA,OAAA;AAKA,YAAA,WAAA,GAAA,KAAA,SAAA;AACA,WAAA,SAAA,GAAA,EAAA;;AAEA,UAAA;AACA;AACA,cAAA,QAAA,GAAA,MAAA,KAAA,SAAA,CAAA,IAAA,CAAA;AACA,UAAA,QAAA,EAAA,CAAA;AACA,YAAA,IAAA,EAAA,MADA;AAEA,YAAA,OAAA,EAAA;AAFA,WAAA;AADA,SAAA,CAAA,CAFA,CASA;;AACA,aAAA,QAAA,CAAA,IAAA,CAAA;AACA,UAAA,IAAA,EAAA,KADA;AAEA,UAAA,OAAA,EAAA,QAAA,CAAA,OAAA,CAAA,CAAA,EAAA,OAAA,CAAA;AAFA,SAAA,EAVA,CAeA;;AACA,aAAA,SAAA,CAAA,MAAA;AACA,gBAAA,SAAA,GAAA,KAAA,KAAA,CAAA,gBAAA;AACA,UAAA,SAAA,CAAA,SAAA,GAAA,SAAA,CAAA,YAAA;AACA,SAHA;AAIA,OApBA,CAoBA,OAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,KAAA,CAAA,iBAAA,EAAA,KAAA;AACA,aAAA,QAAA,CAAA,IAAA,CAAA;AACA,UAAA,IAAA,EAAA,KADA;AAEA,UAAA,OAAA,EAAA;AAFA,SAAA;AAIA;AACA;;AA3CA;AAbA,CAAA","sourcesContent":["<template>\r\n  <div class=\"chat-bot-container\" :class=\"{ 'chat-bot-minimized': isMinimized }\">\r\n    <!-- 悬浮窗头部 -->\r\n    <div class=\"chat-bot-header\" @click=\"toggleMinimize\">\r\n      <span class=\"chat-bot-title\">智能助手</span>\r\n      <div class=\"chat-bot-controls\">\r\n        <i :class=\"isMinimized ? 'el-icon-plus' : 'el-icon-minus'\" class=\"control-icon\"></i>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 聊天内容区域 -->\r\n    <div class=\"chat-bot-content\" v-show=\"!isMinimized\">\r\n      <div class=\"chat-messages\" ref=\"messageContainer\">\r\n        <div v-for=\"(message, index) in messages\" :key=\"index\" \r\n             :class=\"['message', message.type === 'user' ? 'user-message' : 'bot-message']\">\r\n          <div class=\"message-content\">{{ message.content }}</div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 输入区域 -->\r\n      <div class=\"chat-input-area\">\r\n        <el-input\r\n          v-model=\"userInput\"\r\n          type=\"textarea\"\r\n          :rows=\"2\"\r\n          placeholder=\"请输入您的问题...\"\r\n          @keyup.enter.native=\"sendMessage\"\r\n        ></el-input>\r\n        <el-button type=\"primary\" @click=\"sendMessage\" :disabled=\"!userInput.trim()\">\r\n          发送\r\n        </el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { CozeAPI } from '@coze/api';\r\n\r\nexport default {\r\n  name: 'ChatBot',\r\n  data() {\r\n    return {\r\n      isMinimized: false,\r\n      userInput: '',\r\n      messages: [],\r\n      apiClient: new CozeAPI({\r\n        token: 'pat_ZR3dhICDUSMapWasnt1NKW29LcoyvZlRVdKZetwZ5moYxCdzZq8Ju8MUGZmQoF2A',\r\n        baseURL: 'https://api.coze.cn'\r\n      })\r\n    };\r\n  },\r\n  methods: {\r\n    toggleMinimize() {\r\n      this.isMinimized = !this.isMinimized;\r\n    },\r\n    async sendMessage() {\r\n      if (!this.userInput.trim()) return;\r\n\r\n      // 添加用户消息\r\n      this.messages.push({\r\n        type: 'user',\r\n        content: this.userInput\r\n      });\r\n\r\n      const userMessage = this.userInput;\r\n      this.userInput = '';\r\n\r\n      try {\r\n        // 调用Coze API\r\n        const response = await this.apiClient.chat({\r\n          messages: [{\r\n            role: 'user',\r\n            content: userMessage\r\n          }]\r\n        });\r\n\r\n        // 添加机器人回复\r\n        this.messages.push({\r\n          type: 'bot',\r\n          content: response.choices[0].message.content\r\n        });\r\n\r\n        // 滚动到底部\r\n        this.$nextTick(() => {\r\n          const container = this.$refs.messageContainer;\r\n          container.scrollTop = container.scrollHeight;\r\n        });\r\n      } catch (error) {\r\n        console.error('Chat API error:', error);\r\n        this.messages.push({\r\n          type: 'bot',\r\n          content: '抱歉，我遇到了一些问题，请稍后再试。'\r\n        });\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.chat-bot-container {\r\n  position: fixed;\r\n  bottom: 20px;\r\n  right: 20px;\r\n  width: 350px;\r\n  background: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n  z-index: 1000;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.chat-bot-minimized {\r\n  width: 200px;\r\n}\r\n\r\n.chat-bot-header {\r\n  padding: 12px 16px;\r\n  background: #409EFF;\r\n  color: white;\r\n  border-radius: 8px 8px 0 0;\r\n  cursor: pointer;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.chat-bot-title {\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n}\r\n\r\n.control-icon {\r\n  font-size: 18px;\r\n}\r\n\r\n.chat-bot-content {\r\n  height: 400px;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.chat-messages {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 16px;\r\n}\r\n\r\n.message {\r\n  margin-bottom: 12px;\r\n  max-width: 80%;\r\n}\r\n\r\n.user-message {\r\n  margin-left: auto;\r\n}\r\n\r\n.bot-message {\r\n  margin-right: auto;\r\n}\r\n\r\n.message-content {\r\n  padding: 8px 12px;\r\n  border-radius: 8px;\r\n  background: #f4f4f5;\r\n  word-break: break-word;\r\n}\r\n\r\n.user-message .message-content {\r\n  background: #409EFF;\r\n  color: white;\r\n}\r\n\r\n.chat-input-area {\r\n  padding: 12px;\r\n  border-top: 1px solid #ebeef5;\r\n  display: flex;\r\n  gap: 8px;\r\n}\r\n\r\n.chat-input-area .el-button {\r\n  align-self: flex-end;\r\n}\r\n</style> "],"sourceRoot":"src/components"}]}